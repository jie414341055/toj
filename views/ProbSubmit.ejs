<script src="/javascripts/editors.js"></script>

<style type="text/css" media="screen">
	#embedded_ace_code {
		height: 455px;
		width: 650px;
		border: 1px solid #DDD;
		border-radius: 4px;
		border-bottom-right-radius: 0px;
		margin-top: 85px;
	}

</style>

<div class="col-md-2" id="langselect">
	<select class="form-control" name="lang" id="lang" onchange="SelectLang(this)">
		<% if(fprob.oj == "hdu") { %>
			<option value="1">G++</option>
			<option value="2">GCC</option>
			<option value="3">Java</option>
			<option value="4">Pascal</option>
			<option value="12" selected>C++</option>
			<option value="13">C</option>
		<% } %>

	</select>
</div>
<div id="embedded_ace_code" style="opacity:1" >
</div>
<button type="submit" class="btn btn-primary" onclick="Submit()"> Submit </button>

<script src="/javascripts/ace.js" type="text/javascript" charset="utf-8"></script>
<script src="/javascripts/mode-java.js" type="text/javascript" charset="utf-8"></script>
<script src="/javascripts/mode-c_cpp.js" type="text/javascript" charset="utf-8"></script>
<script>
	var editor = ace.edit("embedded_ace_code");
	editor.setTheme("ace/theme/chrome");
	editor.getSession().setMode("ace/mode/c_cpp");
	function SelectLang(choose) {
		var obj = choose.value;
		var editor = ace.edit("embedded_ace_code");
		editor.setTheme("ace/theme/chrome");
		if(obj == "1" || obj == "2" || obj == "12" || obj == "13") {
			editor.getSession().setMode("ace/mode/c_cpp");
		} else if(obj == "3") {
			editor.getSession().setMode("ace/mode/java");
		} else {
			editor.getSession().setMode("ace/mode/pascal");
		}

	}
</script>
<script>
	function Submit() {
		var editor = ace.edit("embedded_ace_code");
		var code = editor.getValue();
		alert(code);
		var aform = document.createElement('form');
		aform.method='post';
		aform.action='/ProbSubmit?pid=<%= fprob.pid %>';
		var a=document.createElement('input');
		a.type='hidden';
		a.name='code';
		a.value=code;
		aform.appendChild(a);

		document.body.appendChild(aform);
		aform.submit();
	}
</script>
