<link href="/stylesheets/statistics.css" rel="stylesheet">
<script src="/javascripts/statistics.js"></script>

<div id="title">
	<h2 style="text-align:center"><font color="#428BCA">Realtime Status</font></h2>
</div>

<div class="form-horizontal" role="form">
	<div class="form-group">
		<label class="col-sm-1 control-label">Language:</label>
		<div class="col-xs-2">
			<select id = "lang" class="form-control">
				<option value=""<%if(!flang){%>selected<%}%>>All</option>
				<option value="12"<%if(flang=='12'){%>selected<%}%>>C++</option>
				<option value="1"<%if(flang=='1'){%>selected<%}%>>G++</option>
				<option value="3"<%if(flang=='3'){%>selected<%}%>>Java</option>
				<option value="2"<%if(flang=='2'){%>selected<%}%>>GCC</option>
				<option value="13"<%if(flang=='13'){%>selected<%}%>>C</option>
				<option value="4"<%if(flang=='4'){%>selected<%}%>>Pascal</option>
				<option value="15"<%if(flang=='15'){%>selected<%}%>>Perl</option>
				<option value="16"<%if(flang=='16'){%>selected<%}%>>Python</option>
			</select>
		</div>
	</div>
	<div class="form-group">
		<table id="Status" class="table table-condensed table-bordered table-striped table-centered">
			<thead>
				<tr>
					<th class="header-runid">
						<div id="searchTitleBtn" class="" order='asc'><a href="#">Run ID</a></div>
					</th>
					<th class="header-sub_time">
						<div id="searchTitleBtn" class="" order='asc'><a href="#">Submit Time</a></div>
					</th>
					<th class="header-result">
						<div id="titleBtn" class="" order='asc'><a href="#">Result</a></div>
					</th>
					<th class="header-pid">
						<div id="searchAcrateBtn" class="" order='asc'><a href="#">PID</a></div>
					</th>
					<th class="header-time">
						<div id="searchAcrateBtn" class="" order='asc'><a href="#">Time</a></div>
					</th>
					<th class="header-memory">
						<div id="searchAcrateBtn" class="" order='asc'><a href="#">Memory</a></div>
					</th>
					<th class="header-codelen">
						<div id="searchAcrateBtn" class="" order='asc'><a href="#">Code Len</a></div>
					</th>
					<th class="header-lang">
						<div id="searchAcrateBtn" class="" order='asc'><a href="#">Language</a></div>
					</th>
					<th class="header-user">
						<div id="searchAcrateBtn" class="" order='asc'><a href="#">User</a></div>
					</th>
				</tr>
			</thead>
			<tbody>
				<% fstats.forEach(function(stat, index) { %>
				<tr>
					<td><%- stat.run_ID %></td>

					<td><%- stat.submit_time %></td>

					<% if(stat.result == "Accepted") {%>
					<td><font color="red"><%- stat.result %></font></td>
					<% } else if(stat.result == "Compilation Error") {%>
					<td><font color="#6633FF"><a href=/ShowCEError?runid=<%- stat.run_ID%>><%- stat.result %></a></font></td>
					<% } else if(stat.result == "Presentation Error") {%>
					<td><font color="orange"><%- stat.result %></font></td>
					<% } else { %>
					<td><font color="green"><%- stat.result %></font></td>
					<% } %>

					<td><a href=/ShowProblems?pid=<%- stat.pid%>> <%- stat.pid %></a></td>
					<td><%- stat.time_used %>
					<% if(stat.time_used) {%>MS<% } %>
					</td>

					<td><%- stat.mem_used %>
					<% if(stat.mem_used) {%>K<% } %>
					</td>

					<% if(floginUser == stat.username) { %>
					<td><a href=/ShowCode?runid=<%- stat.run_ID %>><%- stat.code_len %>B</a></td>
					<% } else {%>
					<td><%- stat.code_len %>B</td>
					<% } %>

					<td><%- fcorrlang[stat.lang]%></td>

					<td><a href=/profile/<%- stat.username %>><%- stat.username %></a></td>
				</tr>
				<% }) %>
			</tbody>
		</table>
	</div>
	<div class="form-group">
		<center>
		<ul class="pager"> 
			<li><a href=<%= furl %>&page=1>First Page</a></li>
			<% if(fpageID == 1) { %>
			<li><a href=#>Prev Page</a></li>
			<% } else {%>
			<li><a href=<%= furl%>&page=<%= fpageID-1%>>Prev Page</a></li>
			<% } %>
			<% if(fpageID == ftotal_page) { %>
			<li><a href=#>Next Page</a></li>
			<% } else {%>
			<li><a href=<%= furl%>&page=<%= fpageID+1%>>Next Page</a></li>
			<% } %>
			<li><a href=<%= furl %>&page=<%= ftotal_page %>>Last Page</a></li>
		</ul>
		</center>
	</div>
</div>
